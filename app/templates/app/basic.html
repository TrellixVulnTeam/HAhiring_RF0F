{% extends "app/layout.html" %}

{% block content %}
<style>
.ace-tm {
    background-color: #FFFFFF;
    color: black;
    height: 300px;
    width: 570px;
}
</style>
<body>
<div id="container">
</div>
<style>
pre {
    height: auto;
    max-height: 1000px;
    overflow: auto;
    background-color: #eeeeee;
    word-break: normal !important;
    word-wrap: normal !important;
    white-space: pre !important;
}â€‹
</style>

<div class="col-md-4" style="width:50%;padding-top: 44px;padding-left: 0%;">
<label>Coding Question</label>
    <pre id="editor" style=" " >
        <h2>Ali and Helping innocent people</h2>
        <p>
Arpasland has surrounded by attackers. A truck enters the city. 
The driver claims the load is food and medicine from Iranians.
&nbsp;Ali is one of the soldiers in Arpasland. He doubts about 
the&nbsp;truck, maybe it's from the siege. He knows that&nbsp;
a&nbsp;tag is valid if the sum of every two consecutive digits 
of it is even and its letter is not a vowel. Determine if the 
tag of the truck is valid or not</p>
        <p>We consider the letters <strong>"A","E","I","O","U","Y</strong>" to be vowels for this problem.</p>
        <p><strong>Input Format</strong></p>
        <p>The first line contains a string of length 9. The format is "DDXDDD-DD", 
        where D&nbsp;stands for a digit (non zero) and X is an uppercase english&nbsp;letter.</p>
        <p><strong>Output Format</strong></p>
        <p>Print "valid" (without quotes) if the tag is valid, print "invalid" otherwise 
        (without quotes)</p>

        
    </pre>
</div>




   <div class="col-mod-4">
       <form id='codeform'  style="padding-top: 30px;" onsubmit="return false;">
           {% csrf_token %}
           <label>Java Code</label> 
<label class="switch">
  <input type="checkbox" >
  <span class="slider round" style="height: 25px;width: 50px;left:440px;"></span>
</label>
           <div  onchange id='code' name="codearea"   style="width: 570px;height:300px;border: solid;padding: 10px;border-radius: 8px;border-width: 1px;border-color: #cccaca;"></div><br/>
           <label>Input</label><br/>
           <textarea id="input" style="width: 500px;height:60px;border-radius: 8px;" ></textarea></br>
           <button  onclick="runCode()" id='runbtn' class="btn-success" >Compile & run</button><div class="loader" style="position: relative;left: 60%;right: 20px;"></div><button  onclick="submitCode()" id='sbmitbtn' class="btn-success" >Submit</button><br/>
            
           <label>Output</label><br/>
        <textarea id="output" style="width: 500px;height:100px;border-radius: 8px;" disabled ></textarea>
       </form>
       


   </div>
   </body>
   <script src="https://code.jquery.com/jquery-1.9.1.min.js"></script>
    
        <script type="text/javascript">

       var e=ace.edit("code")
       e.getSession().setMode("ace/mode/java");
     
      e.setValue("import java.util.*;\npublic class Main{\n\tpublic static void main(String args[]){\n\tScanner scan = new Scanner(System.in);\n\tSystem.out.println();\n\t}\n}");
       $(document).ready(function() {
                $('.loader').hide();
              }); 

            function runCode(){
            
           
            if(e.getValue()!=""){
             $('.loader').show();
          var ajaxMins= new Date().getMinutes();
          var ajaxSecs= new Date().getSeconds();
          var ajaxMS=new Date().getMilliseconds();
            $.ajax
          ({
            type: 'POST',
            url: 'code1/',
            dataType: 'json',
            cache: false,
            async : true,
            data: {
            csrfmiddlewaretoken: '{{ csrf_token }}',
            code : e.getValue(),
            input: $('#input').val()
            },
            success: function(json){
            $('#output').html(json.msg);
            $('.loader').hide();
            
            }

          }).done ( function(){
            var ajaxMins2= new Date().getMinutes()-ajaxMins;
          var ajaxSecs2= (new Date().getSeconds()%60)-ajaxSecs;
          var ajaxMS2=new Date().getMilliseconds()-ajaxMS;

            console.log(ajaxSecs2," seconds",);
          });
            }
            else{
               $('#output').html("Don't submit empty code");
            }
            }
        

        document.addEventListener('DOMContentLoaded', function () {
  var checkbox = document.querySelector('input[type="checkbox"]');

  checkbox.addEventListener('change', function () {
    if (checkbox.checked) {
        e.setTheme("ace/theme/twilight")
      console.log('Checked');
    } else {
      // do that
       e.setTheme("ace/theme/xcode")
      console.log('Not checked');
    }
  });
});
var code = ace.edit("code", {
  theme: "ace/theme/chaos"
})

function update() {
    var shouldShow = !code.session.getValue().length;
    var node = code.renderer.emptyMessageNode;
    if (!shouldShow && node) {
        code.renderer.scroller.removeChild(code.renderer.emptyMessageNode);
        code.renderer.emptyMessageNode = null;
    } else if (shouldShow && !node) {
        node = code.renderer.emptyMessageNode = document.createElement("div");
        node.textContent = "Write you java code here"
        node.className = "ace_emptyMessage"
        node.style.padding = "0 9px"
        node.style.position = "absolute"
        node.style.zIndex = 9
        node.style.opacity = 0.5
        code.renderer.scroller.appendChild(node);
    }
}
code.on("input", update);
setTimeout(update, 100);
        </script>
{% endblock %}
